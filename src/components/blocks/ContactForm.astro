---
import PageContainer from "../layout/PageContainer.astro";

type Props = {
  formAction: string; // Formspree URL
  redirectUrl?: string; // absolute URL to /thank-you
  title?: string;
  subtitle?: string;
  includePhone?: boolean;
};

const {
  formAction,
  redirectUrl = "https://localhost:4321/thank-you",
  title = "Get a free quote",
  subtitle = "Tell us a bit about your project. We’ll reply same-day.",
  includePhone = false,
} = Astro.props as Props;
---

<section class="bg-[--surface-muted] py-12 sm:py-16">
  <PageContainer>
    <div
      class="mx-auto w-full max-w-lg rounded-2xl border border-[--border] bg-white p-6 sm:p-8"
    >
      {title && <h1 class="text-3xl sm:text-4xl font-bold">{title}</h1>}
      {subtitle && <p class="mt-3 text-slate-700">{subtitle}</p>}

      <form action={formAction} method="POST" class="mt-8 grid gap-5">
        <!-- Honeypot -->
        <label class="hidden" aria-hidden="true">
          Don’t fill this out if you’re human:
          <input name="website" tabindex="-1" autocomplete="off" />
        </label>

        <input type="hidden" name="_subject" value="New website inquiry" />
        {
          redirectUrl && (
            <input type="hidden" name="_redirect" value={redirectUrl} />
          )
        }

        <label class="grid gap-1" for="name">
          <span class="text-sm font-medium">Name</span>
          <input
            id="name"
            name="name"
            required
            autocomplete="name"
            class="h-12 rounded-2xl border border-[--border] px-3 outline-none focus:ring-4 focus:ring-blue-300"
          />
        </label>

        <label class="grid gap-1" for="email">
          <span class="text-sm font-medium">Email</span>
          <input
            id="email"
            name="email"
            type="email"
            required
            autocomplete="email"
            inputmode="email"
            class="h-12 rounded-2xl border border-[--border] px-3 outline-none focus:ring-4 focus:ring-blue-300"
          />
        </label>

        {
          includePhone && (
            <label class="grid gap-1" for="phone">
              <span class="text-sm font-medium">Phone (optional)</span>
              <input
                id="phone"
                name="phone"
                type="tel"
                autocomplete="tel"
                inputmode="tel"
                class="h-12 rounded-2xl border border-[--border] px-3 outline-none focus:ring-4 focus:ring-blue-300"
              />
            </label>
          )
        }

        <label class="grid gap-1" for="message">
          <span class="text-sm font-medium">Message</span>
          <textarea
            id="message"
            name="message"
            rows={5}
            required
            class="rounded-2xl border border-[--border] px-3 py-3 outline-none focus:ring-4 focus:ring-blue-300"
          ></textarea>
        </label>

        <button
          class="h-12 rounded-2xl bg-[--color-brand] text-white font-semibold hover:opacity-90 focus:outline-none focus:ring-4 focus:ring-blue-300"
        >
          Send
        </button>
      </form>
    </div>
  </PageContainer>
</section>
