---
type Product = {
  name: string;
  price: string;
  blurb?: string;
  ctaText: string;
  ctaHref: string;
  features: string[];
  popular?: boolean;
};

type Props = {
  products: Product[];
  title?: string;
  backgroundClass?: string;
};

const {
  products = [],
  title = "Pricing",
  backgroundClass = "bg-[--surface-muted]",
} = Astro.props as Props;
---

<section class={backgroundClass} aria-labelledby="pricing-heading">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12 sm:py-16">
    <h2 id="pricing-heading" class="text-3xl sm:text-4xl font-bold">{title}</h2>

    <ul class="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {
        products.map((p) => (
          <li
            class={`rounded-2xl border border-[--border] bg-white p-6 ${p.popular ? "ring-2 ring-[--color-brand]" : ""}`}
          >
            <div class="flex items-baseline gap-2">
              <h3 class="text-xl font-semibold">{p.name}</h3>
              {p.popular && (
                <span class="text-xs px-2 py-1 rounded-full bg-[--surface-muted] border border-[--border]">
                  Popular
                </span>
              )}
            </div>

            {p.blurb && <p class="mt-2 text-slate-600">{p.blurb}</p>}
            <div class="mt-4 text-3xl font-bold">{p.price}</div>

            <ul class="mt-4 grid gap-2 text-sm text-slate-700">
              {p.features.map((f) => (
                <li>â€¢ {f}</li>
              ))}
            </ul>

            <a href={p.ctaHref} class="inline-block mt-6">
              <button class="h-11 px-5 rounded-2xl bg-[--color-brand] text-white font-semibold hover:opacity-90">
                {p.ctaText}
              </button>
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</section>
